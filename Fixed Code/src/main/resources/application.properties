# ==============================================================
# üóÑÔ∏è DATABASE CONFIGURATION
# --------------------------------------------------------------
# Using in-memory H2 database for local testing
# (Change to MySQL/PostgreSQL for production)
# ==============================================================
spring.datasource.url=jdbc:h2:mem:apilab;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=
spring.jpa.hibernate.ddl-auto=update
spring.h2.console.enabled=true


# ==============================================================
# üîê PART 7: JWT HARDENING
# --------------------------------------------------------------
# - Loads a strong secret key from environment variable
# - Sets short token lifetime (15 min)
# - Adds issuer and audience claims for strict validation
# ==============================================================

# ‚úÖ Use environment variable for secret (fallback for local dev)
app.jwt.secret=${JWT_SECRET:ChangeThisToAProperlyLongRandomSecretKey!@#789}

# ‚úÖ Token lifetime: 15 minutes = 900 seconds
app.jwt.ttl-seconds=900

# ‚úÖ Required JWT standard claims
app.jwt.issuer=owasp-api-lab
app.jwt.audience=owasp-api-users


# ==============================================================
# ‚öôÔ∏è PART 5: RATE LIMITING CONFIGURATION
# --------------------------------------------------------------
# Applies only to sensitive endpoints (e.g., /api/auth/**, /api/accounts/**)
# to prevent brute-force and abuse attacks.
# --------------------------------------------------------------
# capacity        ‚Üí Number of requests allowed per user/IP
# duration        ‚Üí Duration in which the limit applies
# duration-unit   ‚Üí Time unit (SECONDS, MINUTES, HOURS)
# ==============================================================

# ‚úÖ Default rate limiting: 5 requests per minute
app.rate-limit.capacity=5
app.rate-limit.duration=1
app.rate-limit.duration-unit=MINUTES

# (Optional) Stricter rate limit for authentication endpoints
# app.rate-limit.auth.capacity=3
# app.rate-limit.auth.duration=1
# app.rate-limit.auth.duration-unit=MINUTES


# ==============================================================
# ‚ö†Ô∏è PART 8: ERROR HANDLING & LOGGING
# --------------------------------------------------------------
# - Limits sensitive error info exposure in production
# - Enables simple structured server logging
# --------------------------------------------------------------
# "always" ‚Üí show errors (dev only)
# "never"  ‚Üí hide errors (production safe)
# ==============================================================

# ‚úÖ Use ‚Äúnever‚Äù in production to avoid stacktrace exposure
server.error.include-message=never
server.error.include-stacktrace=never

# ‚úÖ Logging configuration
logging.level.root=INFO
logging.file.name=logs/app.log

# Optional: enable per-package logging granularity (for debugging)
# logging.level.edu.nu.owaspapivulnlab=DEBUG
